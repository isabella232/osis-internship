# Generated by Django 2.2.13 on 2021-05-26 07:50

import django.contrib.postgres.fields.jsonb
from django.db import migrations, models
import django.db.models.deletion
import uuid


class Migration(migrations.Migration):
    replaces = [('internship', '0001_initial'), ('internship', '0002_internshipchoice'),
                ('internship', '0003_auto_20160527_1230'), ('internship', '0004_period'),
                ('internship', '0005_internshipoffer_selectable'), ('internship', '0006_auto_20160623_1647'),
                ('internship', '0007_auto_20160623_1633'), ('internship', '0008_internship_manager_permission'),
                ('internship', '0006_auto_20160627_1532'), ('internship', '0009_merge'),
                ('internship', '0010_remove_internshipenrollment_learning_unit_enrollment'),
                ('internship', '0011_auto_20160701_1700'), ('internship', '0012_auto_20160701_1712'),
                ('internship', '0013_create_internship_access_perm'), ('internship', '0014_add_and_init_groups'),
                ('internship', '0015_internshipspeciality'), ('internship', '0016_intenshipstudentinformations'),
                ('internship', '0017_auto_20160704_2259'), ('internship', '0018_internshipstudentaffectationstat'),
                ('internship', '0019_auto_20160715_1501'), ('internship', '0020_internshipspeciality_acronym'),
                ('internship', '0021_auto_20160817_1520'), ('internship', '0022_internshipchoice_internship_choice'),
                ('internship', '0023_internshipoffer_master'),
                ('internship', '0024_internshipspeciality_order_postion'),
                ('internship', '0025_affectationgenerationtime'),
                ('internship', '0026_internshipspecialitygroup_internshipspecialitygroupmember'),
                ('internship', '0027_add_uuid_field'), ('internship', '0028_populate_uuid_field'),
                ('internship', '0029_internshipstudentinformation_contest'), ('internship', '0030_auto_20170302_1133'),
                ('internship', '0031_add_uuid_field_period_places'),
                ('internship', '0032_populate_uuid_field_period_places'), ('internship', '0033_auto_20170308_1007'),
                ('internship', '0034_internshipenrollment_internship_choice'),
                ('internship', '0035_cohort_organization_period'), ('internship', '0036_cohort_internship_speciality'),
                ('internship', '0037_add_cohort_to_student_information'),
                ('internship', '0038_optimize_organization_address_queries'), ('internship', '0039_internship'),
                ('internship', '0040_auto_20170405_0942'), ('internship', '0041_internshipoffer_internship'),
                ('internship', '0042_internshipoffer_cohort'), ('internship', '0043_auto_20170405_2048'),
                ('internship', '0044_auto_20170406_1053'), ('internship', '0045_auto_20170407_1358'),
                ('internship', '0046_auto_20170410_1322'), ('internship', '0047_auto_20170410_1601'),
                ('internship', '0048_remove_old_choices_data'),
                ('internship', '0049_prevent_multiple_choices_for_preference'),
                ('internship', '0050_affectationgenerationtime_cohort'), ('internship', '0051_auto_20170503_0045'),
                ('internship', '0052_internship_alternate_speciality'),
                ('internship', '0053_remove_internshipoffer_internship'), ('internship', '0054_auto_20170804_1407'),
                ('internship', '0055_auto_20171120_1630'), ('internship', '0056_auto_20171129_0933'),
                ('internship', '0057_auto_20171205_1632'), ('internship', '0058_internshipmaster_country'),
                ('internship', '0059_auto_20171220_1033'), ('internship', '0060_auto_20180108_1523'),
                ('internship', '0061_auto_20180112_1344'),
                ('internship', '0062_remove_internshipspeciality_learning_unit'),
                ('internship', '0063_auto_20180116_1519'), ('internship', '0064_cohort_originated_from'),
                ('internship', '0065_remove_internship_alternate_speciality'),
                ('internship', '0066_internshipchoice_registered'),
                ('internship', '0067_internshipspeciality_selectable'), ('internship', '0068_auto_20180125_1420'),
                ('internship', '0069_auto_20180202_1355'), ('internship', '0070_remove_internshipmaster_type_mastery'),
                ('internship', '0071_auto_20180220_1527'), ('internship', '0072_auto_20180313_1530'),
                ('internship', '0073_auto_20180504_1427'), ('internship', '0074_auto_20180629_1108'),
                ('internship', '0075_auto_20180810_1436'), ('internship', '0076_auto_20181122_1310'),
                ('internship', '0077_auto_20190208_1101'), ('internship', '0078_auto_20190222_1159'),
                ('internship', '0079_internshipscore_internshipscoremapping'),
                ('internship', '0080_internshipscore_score'), ('internship', '0081_auto_20190724_1107'),
                ('internship', '0082_internshipstudentaffectationstat_internship_evaluated'),
                ('internship', '0083_internshipstudentinformation_evolution_score'),
                ('internship', '0084_auto_20190821_1427'), ('internship', '0085_auto_20191118_0930'),
                ('internship', '0086_internshipscore_excused'), ('internship', '0087_internshipscorereason'),
                ('internship', '0088_internshipscore_reason'),
                ('internship', '0089_internshipstudentinformation_evolution_score_reason'),
                ('internship', '0090_masterallocation_uuid'),
                ('internship', '0091_clean_master_emails_and_generalists'),
                ('internship', '0092_clean_master_duplicates'), ('internship', '0093_internshipmaster_person'),
                ('internship', '0094_move_master_address_to_person_address'),
                ('internship', '0095_internshipmaster_user_account_status'),
                ('internship', '0096_internshipscore_comments'), ('internship', '0097_internshipscore_objectives'),
                ('internship', '0098_internshipmaster_role'), ('internship', '0099_period_sent_reminder_mail'),
                ('internship', '0100_auto_20210224_1542'), ('internship', '0101_internshipscore_validated'),
                ('internship', '0102_auto_20210310_1527'), ('internship', '0103_internshipscore_student_affectation'),
                ('internship', '0104_auto_20210323_1549'), ('internship', '0105_auto_20210323_1619'),
                ('internship', '0106_auto_20210406_1433'), ('internship', '0107_internshipscore_student_presence')]

    initial = True

    dependencies = [
        ('base', '0057_creation_and_initialisation_of_groups'),
        ('reference', '0016_auto_20170410_1318'),
        ('base', '0567_auto_20210211_0843'),
        ('base', '0543_auto_20201120_1040'),
        ('base', '0098_auto_20170306_0953'),
        ('base', '0016_auto_20160224_1039'),
        ('base', '0449_auto_20190423_1843'),
        ('base', '0055_message_history_modifications'),
        ('contenttypes', '__latest__'),
        ('base', '0035_auto_20160421_2347'),
        ('base', '0058_add_initial_users_to_groups'),
    ]

    operations = [
        migrations.CreateModel(
            name='Cohort',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=255)),
                ('description', models.TextField()),
                ('publication_start_date', models.DateField()),
                ('subscription_start_date', models.DateField()),
                ('subscription_end_date', models.DateField()),
                ('originated_from', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
            ],
            options={
                'abstract': False,
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Organization',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('acronym', models.CharField(blank=True, max_length=15)),
                ('website', models.URLField(blank=True, max_length=255, null=True)),
                ('reference', models.CharField(blank=True, max_length=30, null=True)),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
                ('report_address', models.IntegerField(blank=True, default=12, null=True)),
                ('report_birthdate', models.IntegerField(blank=True, default=8, null=True)),
                ('report_city', models.IntegerField(blank=True, default=14, null=True)),
                ('report_email', models.IntegerField(blank=True, default=9, null=True)),
                ('report_end_date', models.IntegerField(blank=True, default=3, null=True)),
                ('report_first_name', models.IntegerField(blank=True, default=5, null=True)),
                ('report_gender', models.IntegerField(blank=True, default=6, null=True)),
                ('report_last_name', models.IntegerField(blank=True, default=4, null=True)),
                ('report_noma', models.IntegerField(blank=True, default=10, null=True)),
                ('report_period', models.IntegerField(blank=True, default=1, null=True)),
                ('report_phone', models.IntegerField(blank=True, default=11, null=True)),
                ('report_postal_code', models.IntegerField(blank=True, default=13, null=True)),
                ('report_specialty', models.IntegerField(blank=True, default=7, null=True)),
                ('report_start_date', models.IntegerField(blank=True, default=2, null=True)),
                ('city', models.CharField(blank=True, max_length=255, null=True)),
                ('country', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='reference.Country')),
                ('location', models.CharField(blank=True, max_length=255, null=True)),
                ('phone', models.CharField(blank=True, max_length=30, null=True)),
                ('postal_code', models.CharField(blank=True, max_length=20, null=True)),
            ],
            options={
                'unique_together': {('reference', 'cohort')},
            },
        ),
        migrations.CreateModel(
            name='Period',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=255)),
                ('date_start', models.DateField()),
                ('date_end', models.DateField()),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
                ('reminder_mail_sent', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='InternshipSpeciality',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=125)),
                ('mandatory', models.BooleanField(default=False)),
                ('acronym', models.CharField(max_length=125)),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
                ('sequence', models.IntegerField(blank=True, null=True)),
                ('selectable', models.BooleanField(default=True)),
            ],
            options={
                'ordering': ('name',),
            },
        ),
        migrations.CreateModel(
            name='Internship',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(max_length=255)),
                ('length_in_periods', models.IntegerField(default=1)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
                ('speciality', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipSpeciality')),
                ('position', models.IntegerField(default=0)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='InternshipOffer',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=255)),
                ('maximum_enrollments', models.IntegerField()),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Organization')),
                ('selectable', models.BooleanField(default=True)),
                ('speciality', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipSpeciality')),
                ('master', models.CharField(blank=True, max_length=100, null=True)),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
            ],
            options={
                'permissions': (('is_internship_manager', 'Is Internship Manager'), ('can_access_internship', 'Can access internships')),
            },
        ),
        migrations.CreateModel(
            name='InternshipMaster',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('civility', models.CharField(blank=True, choices=[('PROFESSOR', 'PROFESSOR'), ('DOCTOR', 'DOCTOR')], max_length=50, null=True)),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('email_private', models.EmailField(blank=True, max_length=255, null=True, verbose_name='Private email')),
                ('start_activities', models.DateField(blank=True, null=True)),
                ('email_additional', models.CharField(blank=True, max_length=255, null=True, verbose_name='Additional email')),
                ('person', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='base.person')),
                ('user_account_status', models.CharField(choices=[('INACTIVE', 'INACTIVE'), ('PENDING', 'PENDING'), ('ACTIVE', 'ACTIVE')], default='INACTIVE', max_length=50)),
            ],
        ),
        migrations.CreateModel(
            name='InternshipEnrollment',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('internship_offer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipOffer')),
                ('period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Period')),
                ('place', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Organization')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='base.Student')),
                ('internship', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Internship')),
            ],
        ),
        migrations.CreateModel(
            name='PeriodInternshipPlaces',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('number_places', models.IntegerField()),
                ('internship_offer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipOffer')),
                ('period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Period')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
            ],
        ),
        migrations.CreateModel(
            name='InternshipChoice',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('choice', models.IntegerField()),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Organization')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='base.Student')),
                ('priority', models.BooleanField()),
                ('speciality', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipSpeciality')),
                ('internship', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Internship')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('registered', models.DateTimeField(null=True)),
            ],
            options={
                'unique_together': {('student', 'internship', 'choice')},
            },
        ),
        migrations.CreateModel(
            name='InternshipStudentAffectationStat',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('choice', models.CharField(choices=[('0', '0'), ('1', '1'), ('2', '2'), ('3', '3'), ('4', '4'), ('E', 'E'), ('I', 'I'), ('X', 'X')], default='0', max_length=1)),
                ('cost', models.IntegerField()),
                ('consecutive_month', models.BooleanField(default=False)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Organization')),
                ('period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Period')),
                ('speciality', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipSpeciality')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='base.Student')),
                ('type', models.CharField(choices=[('S', 'S'), ('N', 'N'), ('X', 'X')], default='N', max_length=1)),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('internship', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='internship.Internship')),
                ('internship_evaluated', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='AffectationGenerationTime',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('start_date_time', models.DateTimeField()),
                ('end_date_time', models.DateTimeField()),
                ('generated_by', models.CharField(default='None', max_length=255)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
            ],
        ),
        migrations.CreateModel(
            name='InternshipScoreMapping',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('apd', models.IntegerField()),
                ('score_A', models.IntegerField(default=0)),
                ('score_B', models.IntegerField(default=0)),
                ('score_C', models.IntegerField(default=0)),
                ('score_D', models.IntegerField(default=0)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='internship.Cohort')),
                ('period', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='internship.Period')),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='MasterAllocation',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('master', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipMaster')),
                ('organization', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='internship.Organization')),
                ('specialty', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='internship.InternshipSpeciality')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('role', models.CharField(choices=[('MASTER', 'MASTER'), ('DELEGATE', 'DELEGATE')], default='MASTER', max_length=50)),
            ],
        ),
        migrations.CreateModel(
            name='InternshipScoreReason',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('text', models.CharField(max_length=255)),
            ],
            options={
                'abstract': False,
            },
        ),
        migrations.CreateModel(
            name='InternshipStudentInformation',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('location', models.CharField(max_length=255)),
                ('postal_code', models.CharField(max_length=20)),
                ('city', models.CharField(max_length=255)),
                ('country', models.CharField(max_length=255)),
                ('email', models.EmailField(blank=True, max_length=255, null=True)),
                ('phone_mobile', models.CharField(blank=True, max_length=100, null=True)),
                ('person', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='base.Person')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('contest', models.CharField(blank=True, choices=[('SPECIALIST', 'Specialist'), ('GENERALIST', 'Generalist')], max_length=124, null=True)),
                ('cohort', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='internship.Cohort')),
                ('evolution_score', models.IntegerField(blank=True, null=True)),
                ('evolution_score_reason', models.CharField(blank=True, max_length=255, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='InternshipScore',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False, unique=True)),
                ('APD_1', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_2', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_3', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_4', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_5', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_6', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_7', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_8', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_9', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_10', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_11', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_12', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_13', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_14', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('APD_15', models.CharField(blank=True, choices=[('A', 'A'), ('B', 'B'), ('C', 'C'), ('D', 'D')], max_length=1, null=True)),
                ('score', models.IntegerField(blank=True, null=True)),
                ('excused', models.BooleanField(default=False)),
                ('reason', models.CharField(blank=True, max_length=255, null=True)),
                ('comments', django.contrib.postgres.fields.jsonb.JSONField(blank=True, default=dict)),
                ('objectives', django.contrib.postgres.fields.jsonb.JSONField(blank=True, default=dict)),
                ('validated', models.BooleanField(default=False)),
                ('student_affectation', models.OneToOneField(null=True, on_delete=django.db.models.deletion.PROTECT, related_name='score', to='internship.internshipstudentaffectationstat')),
                ('student_presence', models.NullBooleanField()),
            ],
            options={
                'abstract': False,
            },
        ),
    ]
