== Les functionalités

=== L'affectation des stages

Chaque année des étudiants de la faculté de médecine doivent effectuer 12 périodes de stages (1 période par mois). Les stages sont divisés en 2 catégories:

1. *Stages obligatoires*: des spécialités imposées à tous les étudiants avec un nombre de périodes (table 1). Les stages se déroulent dans la première partie de l'année, suivis par les stages au choix.

2. *Stages au choix*: des spécialités au choix limités à 1 mois par specialité. L'étudiant peut choisir 4 fois la même spécialité ou 4 spécialités différentes. Les stages se déroulent a la fin d'année. La priorité est donnée aux étudiants qui présentent un concours dans la spécialité choisie pour le stage au choix. L'information concernant la spécialité du concours est fournie par l'étudiant au moment de l'inscription.

Voici le tableau qui montre un example des stages et leurs périodes respectives.

.Répartition des stages
|===
|Spécialité |Périodes

|Médecine interne (MI)
|P1, P2

|Urgence (UR)
|P3, P4

|Chirurgie (CH)
|P5

|Gynécologie-obstétrice (GO)
|P6

|Pédiatrie (PE)
|P7

|Stages au choix (peuvent être dans la même spécialité)
|P8, P9, P10, P11
|===

Pour affecter les étudiants aux differents stages offert par les hôpitaux dans les périodes bien determinés, la faculté suivre le processus suivant une fois par an, au debut de l'année, entre janvier et fevrier:

image::images/internship-bp.png[Internship Business Process]

En plus d'expliquer le business de manière explicite, le processus nous aide également à identifier les rôles et les tâches dont ils sont responsables. Avec cela, les autorisations peuvent être assignées correctement.

Voici une description détaillée des tous les tâches du processus:

[#creation_cohort]
==== Création d'une cohorte

La *Cohorte* est utilisé pour définir la période annuel d'organisation des stages. Cette période ne coïncide pas avec l'année académique et ça gestion est tout à fait spécifique au domaine des stages de médecine.

La création d'une cohorte est le premier pas ver l'affectation des stages. Presque toutes les données sont liées à cela. À cette étape le gestionnaire des stages va créer une cohorte avec des informations comme demandé dans le formulaire suivant.

image::images/cohort-creation.png[Création de cohort]

Les dates d'ouverture et de fermeture permetre le controle d'accès aux inscriptions aux stages par les étudiants matriculés. La date de fermeture est toujour plus grand où egale a la date d'ouverture. La date de publication, qui est plus grand que la date de fermeture des inscriptions, permettre montrer les données des affectations aux étudiants.

Le gestionnaire a l'option de créer une cohorte à partir d'une cohorte existant. Cela lui permettre de réutiliser une bonne partie de les données disponibles. Les données réutilisés sont les hôpitaux, les spécialités, les périodes, les types de stages et les maîtres de stages.

[#import/students]
==== Importation des étudiants

Grace à l'importation de données a partir d'un fichier XLS, ce n'est pas nécessaire de demander aux étudiants de s'inscrire sur l'application. Le fichier provient de l'application de gestion de l'université et contient les étudiants inscrits sur le programme de master en médecine, essentiel pour la démarche du processus d'affectation.

image::images/students-empty.png[Pas d'étudiant dans la cohorte]

L'importation des étudiants est disponible dans la page de consultation des étudiants. En cliquant sur le bouton "Importer", une fenêtre modal s'ouvre pour permettre la sélection du fichier Excel (xlsx) disponible sur la machine de l'utilisateur. Après la sélection, cliquez sur le bouton "Importer" en bleu pour démarrer l'importation. Le temps d'importation depend du nombre d'étudiants dans le fichier à importer.

WARNING: la reimportation des étudiants ira dissocier tous les étudiants existants de la cohorte, les inserés à la main inclus. La liste d'étudiants sera equivalent aux données du fichier dernierment importé. Après la premier importation, c'est recomendé de maintenir les données des étudiants via les fonctionnalités disponible dans l'application.

image::images/students-import.png[Importation des étudiants]

[NOTE]
====
C'est important d'importer un fichier en format `xlsx`. L'application n'est pas compatible avec le format `xls`. Pour avoir un fichier `xlsx` à partir d'un fichier `xls`, vous pouvez ouvrir le ficher `xls` en Excel et _Enregistrer sous_ le format `xlsx` en sélectionnant l'option _Classeur Excel_, qui est la premier dans la liste.

image::images/xls-to-xlsx.png[Convertion de xls vers xlsx]
====

Après l'importation, les étudiants apparaitrent dans la liste, comme illustré dans l'image suivante. C'est possible d'ajouter un nouveau étudiant an cliquant sur "Ajouter", visualiser et modifier un étudiant éxistant en cliquant sur le botton de la colonne "Détails", et modifier les choix fait par l'étudiant en cliquant sur le botton dans la colonne "Modification des choix".

image::images/students-imported.png[Les étudiants importés dans la cohorte]

==== Importation des offres de stages

Les offres de stages (la quantité de places disponibles dans chaque hôpital pour chaque spécialité) sont meilleur gérer dans un fichier Excel. Cette fonctionnalité permettre d'exploiter les données du fichier dans l'application.

image::images/offers-import.png[Importation des offres de stage]

En cas de changement de la quantité des places disponibles, les modifications sont faites dans le même fichier Excel et réimporté dans l'application sans risque de duplication de données. En option, les quantités peuvent être modifiés directement dans l'application, mais en cas de réimportation du fichier Excel les données modifiés manuellement seront écrasés.

NOTE: Malgré l'ordre d'importation de données afficher dans le processus et documenté dans les section 1.2 et 1.3, les étudiants et les offres peuvent être importé n'importe en quel ordre, parce que les données ne sont pas initialement associés. Ils seront seulement après les choix et les affectations des étudiants. 

==== Définition des périodes, des hôpitaux et des stages

Avec l'intention d'organiser la cohorte pour permettre le bon choix des étudiants est l'affectation en suite, le gestionnaire des stages s'occupe de déterminer les dates de debut et fin de la période des choix des stages et la date de début de publication des résultats.

WARNING: Les quatre dernières tâches devraient se terminer avant la date de debut de la période de choix des stages.

==== Choix des stages obligatoires et au choix

Precisement à la date de debut de la période de choix, l'application est ouvert aux étudiants de médecine qui devront faire leurs choix de stages. L'application reste ouvert jusqu'à la fin de la période. Pendant ce temps là, les étudiants pouvent changer librement leurs choix et le gestionaire des stages s'engage a n'est pas modifier les choix faits avant la fin de la période.

L'étudiant a accès a l'application seulement s'il: 

* est régulièrement inscrit comme étudiant à l'université
* a une compte utilisateur pour accéder le réseau et les services en ligne du portail
* est régulièrement inscrit dans une des cohortes existants.

Lorsque l'étudiant se rendre sur la page d'accueil du portail, il a accès a une liste de fonctionnalités: le choix des stages, la liste des hôpitaux, le bilan de choix de stage et d'affectation finale.

Sur le choix des stages, les onglets des différentes spécialités sont présenté.

image::images/choix-stages.png[Le choix des stages par l'étudiant]

Pour les spécialités obligatoires, dans chacun de ces onglets se présentent plusieurs hôpitaux. L'étudiant doit effectuer 4 choix d'hôpital (du premier au 4ème choix). Une fois ces 4 choix faits dans chaque onglet, il faut cliquer sur le bouton "Soumettre" qui se trouve au bas de la page pour enregistrer les choix. Un erreur se produit si l'utilisateur fait plus de 4 choix ou deux fois le même choix.

Pour les stages au choix, c'est possible de faire 4 choix de spécialités. Une fois la spécialité choisie, l'application propose à l'étudiant les hôpitaux disponibles pour ce stage au choix. Les choix est limité à 4 choix d'hôpitaux. Si le système ne propose rien, c'est que cette spécialité n'est pas disponible. Si l'étudiant sélectionne un stage en médecine générale, il faut choisir l'hôpital "Médecine générale" en premier choix puisqu'il n'y a pas d'autre possibilité. Idem pour les spécialités où il n'existe qu'un hôpital. Ce "premier choix" concerne bien l'hôpital et pas la spécialité, la préférence de celle-ci étant déterminée par le numéro du stage au choix.

Losque l'étudiant sélectionne un hôpital dans une spécialité, un compteur informe sur le nombre de places totales disponibles et le nombre d'étudiants ayant déjà choisi cet hôpital en premier choix. Plus la demande dépasse l'offre, plus la probabilité d'obtenir cette affectation est faible.

==== Affectation des stages aux étudiants prioritaires

Affectation des étudiants reconnus par le service d'aide aux étudiants comme prioritaires. Cela donne une priorité adaptée au besoin particulaire de chaque étudiant, mais il n'y a pas d'assurance de recevoir les premiers choix (le plus souvent priorité pour les stages proches du domicile légal ou dans un hôpital avec logement).

L'etudiant devra faire les quatre choix de manière réfléchie et se présenter à la faculté dans un periode bien défini afin de discuter avec le secretariat les critères qui lui sont propres. Après cette discussion, le secretariat déterminera parmi le choix de l'étudiant celui ou ceux que l'application devra obligatoirement prendre en compte. Si les choix semblent non adaptés par rapport à la priorité de l'étudiant, alors le secretariat peut imposer un autre endroit de stage, mais toujours en adéquation avec le besoin de l'étudiant.

==== Affectation des stages aux autres étudiants

Pour les étudiants non-prioritaires, les affectations sont fait automatiquement par l'application. L'algorithme essaye de trouver une solution optimale pour chaque étudiant en terme de spécialité et période. Il y a de contrainte qu'impeche de toujours respecter le premier choix de tous les étudiants. Par exemple, si le nombre d'étudiants est plus grand que le nombre de places disponibles. Pour mieux satisfaire toutes les demandes des étudiants avec les offres limitées, nous essayons de trouver une solution avec le coût le plus faible possible et qui satisfait les différentes contraintes, tout en respectant le mieux possible les souhaits des étudiants.

==== Correction des stages avec problème d'affectation

L'affectation automatique peux avoir de difficulté pour affecter certains étudiants à cause des contraints existants. Dans ce cas, les étudiants sont affecter à un faux hôpital pour être affecter correctement dans un deuxième moment.

La cause principale c'est l'absence de place disponible dans les hôpitaux. Dans ce cas, des nouvelles places sont crée en concertation avec les maîtres de stage.

Tous les affectations devrons être faits avant la date de publication des résultats.

==== Publication des résultats

Quand la date de publication des résultats, défini dans le cohorte, est arrivé, tous les resultats sons publiés en même temps sur le portail de l'université et disponibilizés pour les étudiants impliqués.

==== Consultation des résultats

Les étudiants se connectent sur le portail UCL pour consulter les résultats des affectations. Les données sont disponible en mode lecture. En cas de correction ou de modification en général, une demande devra être fait au secretariat.

=== La gestion journalière

La gestion journalière couvre toutes les fonctionnalités de maintenance de données en dehors de l'exécution du processus. Ce sont les fonctionnalités utilisées au cours de l'année par le gestionnaire des stages.

==== Les hôpitaux

La gestion des hôpitaux est plus que maintenir les données des hôpitaux à jour.

Pour accéder les rapports en format Excel pour les hôpitaux, cliquez sur le bouton vert qu'indique les résultats de l'affectation.

image::images/hospitals-view.png[La liste des hôpitaux]

Dans l'écran de résultats de l'affectation il y a deux bottons pour la production de rapport:

1. pour les mêtres de stage avec les affectations groupés par specialité et période.
2. pour l'hôpital avec une liste des tous les affectation trié par période.

image::images/hospital-affectation-results.png[Les rapports pour l'hôpital]

Le rapport pour l'hôpital peux être configuré dans le formulaire de l'hôpital parce que chacun peux avoir un besoin different. 

Il y a un champ númerique pour chaque donnée disponible pour les hôpitaux. Les champs contiennent la sequence dans lequel les données doivent être afficher. Les champs laissés vides sont ignorés.

image::images/hospital-report-config.png[La configuration de rapport pour l'hôpital]

==== Les spécialités

La gestion des spécialités consiste en maintenir les données des spécialités d'une cohorte. Normalement, les spécialités sont créer automatiquement, au moment de la création d'une cohorte a partir d'une cohorte existant. Après, il suffit d'adapter la liste au cohorte actuelle en supprimant ou ajoutant des spécialités.

image::images/specialties.png[Les spécialités]

* *Les offres de stages*: maintenir les places disponibles dans les différent spécialités des hôpitaux.

* *Les stages*: maintenir les différent types de stages.

* *Gestion des maîtres de stage*: pas encore disponible, mais bientôt le gestionnaire sera capable de maintenir les données des maîtres.

* *Bilan des assignations*: un rapport avec les affectations des étudiants dans les hôpitaux, classé par spécialité.

* *Assignation des stages*: des modifications dans les affectations de stages selon les particularités de chaque étudiant, principalement les cas de permutation des stages.
